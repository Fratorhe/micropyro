

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Post processing &mdash; micropyro 0.1.post25+g0210a7c documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Gas and Char yields" href="char-gas-yields.html" />
    <link rel="prev" title="External calibration" href="external-calibration.html" />
    <link href="_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> micropyro
          

          
          </a>

          
            
            
              <div class="version">
                0.1.post25+g0210a7c
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading-module.html">Loading Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="read-database.html">Read a Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="read-blob.html">Read a Blob File</a></li>
<li class="toctree-l1"><a class="reference internal" href="experiment-reader.html">Read experimental matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute-yields.html">Compute yields</a></li>
<li class="toctree-l1"><a class="reference internal" href="external-calibration.html">External calibration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Post processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#single-file-tools">Single file tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plots">Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yields">Yields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#multiple-files-tools">Multiple files tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plots-some-compounds">Plots some compounds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plots-totals">Plots totals</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="char-gas-yields.html">Gas and Char yields</a></li>
<li class="toctree-l1"><a class="reference internal" href="generate-database.html">Generate Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities-docs.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="min_versions.html">Requires</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">micropyro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Post processing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/post-processing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="post-processing">
<h1>Post processing<a class="headerlink" href="#post-processing" title="Permalink to this headline">¶</a></h1>
<p>Here, we show several tools to perform postprocessing on the yield data.
To read the results file(s), we can use the reader <a class="reference internal" href="read-blob.html#micropyro.read_blob_file" title="micropyro.read_blob_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">micropyro.read_blob_file()</span></code></a>.</p>
<div class="section" id="single-file-tools">
<h2>Single file tools<a class="headerlink" href="#single-file-tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="plots">
<h3>Plots<a class="headerlink" href="#plots" title="Permalink to this headline">¶</a></h3>
<p>We can plot the <em>n</em> compounds with highest yield. We use the function <a class="reference internal" href="#micropyro.plot_n_highest_yields" title="micropyro.plot_n_highest_yields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">micropyro.plot_n_highest_yields()</span></code></a>:</p>
<dl class="py function">
<dt id="micropyro.plot_n_highest_yields">
<code class="sig-prename descclassname">micropyro.</code><code class="sig-name descname">plot_n_highest_yields</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blob_df</span></em>, <em class="sig-param"><span class="n">ncompounds</span></em>, <em class="sig-param"><span class="n">save_plot</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/micropyro/postprocessing_tools_single_file.html#plot_n_highest_yields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#micropyro.plot_n_highest_yields" title="Permalink to this definition">¶</a></dt>
<dd><p>This utility plots the n compounds with the highest mrf yield.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>blob_df: df</strong></dt><dd><p>Dataframe with the results</p>
</dd>
<dt><strong>ncompounds: int</strong></dt><dd><p>Number of compounds to be plotted</p>
</dd>
<dt><strong>save_plot: str</strong></dt><dd><p>Name of the output file</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<p>As example, we can do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">micropyro</span> <span class="k">as</span> <span class="nn">mp</span>
<span class="n">results_df</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">read_blob_file</span><span class="p">(</span><span class="s2">&quot;100 ug Py_600C.results.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">mp</span><span class="o">.</span><span class="n">plot_n_highest_yields</span><span class="p">(</span><span class="n">results_df</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="yields">
<h3>Yields<a class="headerlink" href="#yields" title="Permalink to this headline">¶</a></h3>
<p>You may also be interested on computing the yields based on the elements.
Remember to add the appropriate elements to the columns in <code class="xref py py-meth docutils literal notranslate"><span class="pre">perform_matching_database()</span></code>
To compute the elemental composition, simply run the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results_df</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">read_blob_file</span><span class="p">(</span><span class="s2">&quot;241 ug Py_850C.results.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">data_per_atom</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">compute_elemental_composition</span><span class="p">(</span><span class="n">results_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_per_atom</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py function">
<dt id="micropyro.compute_elemental_composition">
<code class="sig-prename descclassname">micropyro.</code><code class="sig-name descname">compute_elemental_composition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blob_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/micropyro/postprocessing_tools_single_file.html#compute_elemental_composition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#micropyro.compute_elemental_composition" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the elemental compositon per atom of the blob_df.
To do so, of course, you will have to add the extra columns to the df when performing the database matching.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>blob_df: df</strong></dt><dd><p>dataframe with results</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>data_per_atom: dict</dt><dd><p>dictionary with mass yield per atom for the given blob_df</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<p>The yields can be analyzed using groupings. To add new groupings, add it as new columns in the database,
and remember to include those extra columns in <code class="xref py py-meth docutils literal notranslate"><span class="pre">perform_matching_database()</span></code>.
In a single line, this can be analyzed.
This summary will also perform the elemental composition computation shown above, unless specified otherwise.
If specified, results are exported to json for further processing.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_yields</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">get_yields_summary</span><span class="p">(</span><span class="n">results_df</span><span class="p">,</span> <span class="s2">&quot;grouping&quot;</span><span class="p">,</span> <span class="n">to_file</span><span class="o">=</span><span class="s1">&#39;100 ug Py_600C.totals.csv&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The different groups are: </span><span class="si">{</span><span class="n">data_yields</span><span class="p">[</span><span class="s2">&quot;grouping&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The total FID yield is: </span><span class="si">{</span><span class="n">data_yields</span><span class="p">[</span><span class="s2">&quot;total&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The per-atom yield is: </span><span class="si">{</span><span class="n">data_yields</span><span class="p">[</span><span class="s2">&quot;atoms&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py function">
<dt id="micropyro.get_yields_summary">
<code class="sig-prename descclassname">micropyro.</code><code class="sig-name descname">get_yields_summary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blob_df</span></em>, <em class="sig-param"><span class="n">grouping</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">to_file</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/micropyro/postprocessing_tools_single_file.html#get_yields_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#micropyro.get_yields_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>This utility computes the yields for the atoms based on the grouping.
In addition provides the total FID yield, and the yield per atom if requested.
Sum of elemental and total may slightly differ due to isotopes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>blob_df: df</strong></dt><dd><p>Dataframe with the results</p>
</dd>
<dt><strong>grouping: str</strong></dt><dd><p>Name of the grouping to be used</p>
</dd>
<dt><strong>to_file: str</strong></dt><dd><p>Name of the output file</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>dict_data: dict</dt><dd><p>Dictionary with the grouping, the total and the elemental composition.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="multiple-files-tools">
<h2>Multiple files tools<a class="headerlink" href="#multiple-files-tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="plots-some-compounds">
<h3>Plots some compounds<a class="headerlink" href="#plots-some-compounds" title="Permalink to this headline">¶</a></h3>
<p>We can process several files at the same time to study trends, etc.
A utility <a class="reference internal" href="#micropyro.compare_yields" title="micropyro.compare_yields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">micropyro.compare_yields()</span></code></a> can be used.</p>
<dl class="py function">
<dt id="micropyro.compare_yields">
<code class="sig-prename descclassname">micropyro.</code><code class="sig-name descname">compare_yields</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blob_dfs</span></em>, <em class="sig-param"><span class="n">compounds</span></em>, <em class="sig-param"><span class="n">x_axis</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">save_plot</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/micropyro/postprocessing_tools_multiple_files.html#compare_yields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#micropyro.compare_yields" title="Permalink to this definition">¶</a></dt>
<dd><p>This utility compares the yields of different files (repetitions, temperatures, etc) .</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>blob_dfs: list of dfs</strong></dt><dd><p>List of Dataframes with the results</p>
</dd>
<dt><strong>compounds: list of strings</strong></dt><dd><p>Compounds to be plotted</p>
</dd>
<dt><strong>x_axis: list</strong></dt><dd><p>what to plot in the x axis, could be temperature, or whatever.</p>
</dd>
<dt><strong>save_plot: str</strong></dt><dd><p>Name of the output file</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<p>As example, we can do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">micropyro</span> <span class="k">as</span> <span class="nn">mp</span>
<span class="n">results_df1</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">read_blob_file</span><span class="p">(</span><span class="s2">&quot;241 ug Py_850C.results.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">results_df2</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">read_blob_file</span><span class="p">(</span><span class="s2">&quot;100 ug Py_600C.results.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">compare_yields</span><span class="p">([</span><span class="n">results_df1</span><span class="p">,</span> <span class="n">results_df2</span><span class="p">],</span> <span class="n">compounds</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;phenol&#39;</span><span class="p">,</span> <span class="s1">&#39;methane&#39;</span><span class="p">],</span>
                            <span class="n">save_plot</span><span class="o">=</span><span class="s1">&#39;comparison.pdf&#39;</span><span class="p">,</span> <span class="n">x_axis</span> <span class="o">=</span> <span class="p">[</span><span class="mi">350</span><span class="p">,</span> <span class="mi">300</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;2nd Reactor Temperature, C&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Yield, %&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="plots-totals">
<h3>Plots totals<a class="headerlink" href="#plots-totals" title="Permalink to this headline">¶</a></h3>
<p>We can plot the totals by elements or by grouping.
A main function for this is implemented <code class="xref py py-meth docutils literal notranslate"><span class="pre">micropyro.compare_quantites_totals()</span></code>, which is then particularized by
the different implementations for elements or grouping. Requires to provide the totals in a list of json files.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">micropyro</span> <span class="k">as</span> <span class="nn">mp</span>
<span class="n">mp</span><span class="o">.</span><span class="n">compare_quantites_totals</span><span class="p">(</span><span class="n">list_totals_dict</span><span class="p">,</span> <span class="s1">&#39;atoms&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="n">temps_first_reactor</span><span class="p">,</span> <span class="n">save_plot</span><span class="o">=</span><span class="s1">&#39;elemental.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="char-gas-yields.html" class="btn btn-neutral float-right" title="Gas and Char yields" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="external-calibration.html" class="btn btn-neutral float-left" title="External calibration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Francisco Torres

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>