

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Read a Blob File &mdash; micropyro 0.1.post15+g64bb770 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Read experimental matrix" href="experiment-reader.html" />
    <link rel="prev" title="Read a Database" href="read-database.html" />
    <link href="_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> micropyro
          

          
          </a>

          
            
            
              <div class="version">
                0.1.post15+g64bb770
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading-module.html">Loading Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="read-database.html">Read a Database</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Read a Blob File</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#matching-blob-file-with-database">Matching blob file with database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="experiment-reader.html">Read experimental matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute-yields.html">Compute yields</a></li>
<li class="toctree-l1"><a class="reference internal" href="external-calibration.html">External calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="post-processing.html">Post processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="generate-database.html">Generate Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="min_versions.html">Requires</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">micropyro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Read a Blob File</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/read-blob.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="read-a-blob-file">
<h1>Read a Blob File<a class="headerlink" href="#read-a-blob-file" title="Permalink to this headline">¶</a></h1>
<p>The second step is to read blob files from GC Image software.
In this case, it is much simpler because the files have always the same shape. Thus, a simple reader function is used.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">micropyro</span> <span class="k">as</span> <span class="nn">mp</span>

<span class="n">blob_file</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">read_blob_file</span><span class="p">(</span><span class="s1">&#39;filename.cdf_img01_Blob_Table.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We have some useful functions to, for example, check which compounds are not available in the database.
To do so, we need to pass the database dataframe and the blob file dataframe. The complete snippet looks as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">database</span> <span class="o">=</span> <span class="n">ReadDatabase</span><span class="o">.</span><span class="n">from_xls</span><span class="p">(</span><span class="s1">&#39;Database_micropyro.xlsx&#39;</span><span class="p">)</span>

<span class="n">database_df</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">database</span>

<span class="n">blob_file</span> <span class="o">=</span> <span class="n">read_blob_file</span><span class="p">(</span><span class="s1">&#39;241 ug Epoxy Py_600C-R_350C 105mL.cdf_img01_Blob_Table.csv&#39;</span><span class="p">)</span>

<span class="n">check_matches_database</span><span class="p">(</span><span class="n">database_df</span><span class="o">=</span><span class="n">database_df</span><span class="p">,</span> <span class="n">blob_df</span><span class="o">=</span><span class="n">blob_file</span><span class="p">)</span>
</pre></div>
</div>
<p>We can also access properties of a specific compound using pandas:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">blob_file</span><span class="o">.</span><span class="n">volume</span><span class="p">[</span><span class="s2">&quot;ethane&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Description of the blob read file function is described here:</p>
<dl class="py function">
<dt id="micropyro.read_blob_file">
<code class="sig-prename descclassname">micropyro.</code><code class="sig-name descname">read_blob_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">drop_useless_columns</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">index_col</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/micropyro/blob_file.html#read_blob_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#micropyro.read_blob_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a blob file (CSV) from GC Image software.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>filename: str</strong></dt><dd><p>blob file to be read.</p>
</dd>
<dt><strong>drop_useless_columns: bool.</strong></dt><dd><p>drop some columns from the dataframe which are not used. TODO: revisit if some may be useful (retention time?)</p>
</dd>
<dt><strong>index_col: int</strong></dt><dd><p>Column number to be used as index. Defaults to 1 because GC Image gives the ID as first column,
but for postprocessing we need the 0.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>blob_file: df</dt><dd><p>with the blob file.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<div class="section" id="matching-blob-file-with-database">
<h2>Matching blob file with database<a class="headerlink" href="#matching-blob-file-with-database" title="Permalink to this headline">¶</a></h2>
<p>However, the most important part is to match the compounds in the blob file with the database,
thus grabbing the properties of interest from the database and passing them to the blob file. This is done using the
function <code class="code docutils literal notranslate"><span class="pre">perform_matching_database</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">perform_matching_database</span><span class="p">(</span><span class="n">blob_df</span><span class="o">=</span><span class="n">blob_file</span><span class="p">,</span> <span class="n">database_df</span><span class="o">=</span><span class="n">database_df</span><span class="p">,</span> <span class="n">extra_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>A description of this function is found below:</p>
<dl class="py function">
<dt id="micropyro.perform_matching_database">
<code class="sig-prename descclassname">micropyro.</code><code class="sig-name descname">perform_matching_database</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blob_df</span></em>, <em class="sig-param"><span class="n">database_df</span></em>, <em class="sig-param"><span class="n">extra_columns</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/micropyro/blob_file.html#perform_matching_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#micropyro.perform_matching_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to perform the matching with the df. If the match is correct,
it will copy the required properties to the blob_df.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>blob_df: pandas dataframe</strong></dt><dd><p>Read using read_blob_file</p>
</dd>
<dt><strong>database_df: pandas dataframe</strong></dt><dd><p>Dataframe with the different compounds.</p>
</dd>
<dt><strong>extra_columns: list of str</strong></dt><dd><p>Extra columns to be copied from the df to the blob_df
(maybe some gouping or “c”, “h”, “o”, etc. if intending to do elemental balance)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="experiment-reader.html" class="btn btn-neutral float-right" title="Read experimental matrix" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="read-database.html" class="btn btn-neutral float-left" title="Read a Database" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Francisco Torres

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>