

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>External calibration &mdash; micropyro 0.1.post41+g89116ed documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Post processing" href="post-processing.html" />
    <link rel="prev" title="Compute yields" href="compute-yields.html" />
    <link href="_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> micropyro
          

          
          </a>

          
            
            
              <div class="version">
                0.1.post41+g89116ed
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading-module.html">Loading Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="read-database.html">Read a Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="read-blob.html">Read a Blob File</a></li>
<li class="toctree-l1"><a class="reference internal" href="experiment-reader.html">Read experimental matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute-yields.html">Compute yields</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">External calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="post-processing.html">Post processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="char-gas-yields.html">Gas and Char yields</a></li>
<li class="toctree-l1"><a class="reference internal" href="generate-database.html">Generate Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities-docs.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="min_versions.html">Requires</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">micropyro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>External calibration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/external-calibration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="external-calibration">
<h1>External calibration<a class="headerlink" href="#external-calibration" title="Permalink to this headline">¶</a></h1>
<p>Performing the external calibration is rather a simple task.
Typically, a linear regression model is used forcing to cross the origin.</p>
<p>A class <code class="code docutils literal notranslate"><span class="pre">ExternalCalibration</span></code> has been implemented to make this task easy.
As with other classes, one may use several constructors since data can be in different formats.
So far, only excel and native dataframe are supported. Outliers and missing data are removed automatically.</p>
<p>To perform a calibration, we need only 3 lines of code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">micropyro</span> <span class="k">as</span> <span class="nn">mp</span>
<span class="n">calibration</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">ExternalCalibration</span><span class="o">.</span><span class="n">from_xls</span><span class="p">(</span><span class="n">file_to_read</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;Phenol&quot;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                       <span class="n">usecols</span><span class="o">=</span><span class="s2">&quot;A:J&quot;</span><span class="p">)</span>
<span class="n">calibration</span><span class="o">.</span><span class="n">linear_calibration</span><span class="p">(</span><span class="n">to_file</span><span class="o">=</span><span class="s2">&quot;phenol_calibration.json&quot;</span><span class="p">)</span>
<span class="n">calibration</span><span class="o">.</span><span class="n">plot_calibration</span><span class="p">(</span><span class="n">save_plot</span><span class="o">=</span><span class="s1">&#39;phenol.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A detailed implementation of the class:</p>
<dl class="py class">
<dt id="micropyro.ExternalCalibration">
<em class="property">class </em><code class="sig-prename descclassname">micropyro.</code><code class="sig-name descname">ExternalCalibration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">calibration_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/micropyro/external_calibration.html#ExternalCalibration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#micropyro.ExternalCalibration" title="Permalink to this definition">¶</a></dt>
<dd><p>A class used to perform calibration typically done in micropyrolysis.
So far, only the constructor through dataframe (__init__) or through excel (from_xls) are implemented.
All mass should be given in <strong>mg</strong>.</p>
<p>…</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>calibration_df</strong><span class="classifier">df</span></dt><dd><p>a pandas dataframe with the information on the various experiments performed.</p>
</dd>
<dt><strong>used_is</strong><span class="classifier">bool</span></dt><dd><p>define if internal standard was used (True) or not (False)</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 56%" />
<col style="width: 44%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>from_xls(cls, filename, sheet_name=0, use_is=True, **kwargs)</strong></p></td>
<td><p>Class method to load a xls file</p></td>
</tr>
<tr class="row-even"><td><p><strong>remove_incomplete(self)</strong></p></td>
<td><p>remove incomplete points in the dataset</p></td>
</tr>
<tr class="row-odd"><td><p><strong>linear_calibration(self, outliers=[], to_file=”calibration.json”, recursive=True)</strong></p></td>
<td><p>perform linear regression on the data.</p></td>
</tr>
<tr class="row-even"><td><p><strong>plot_calibration(self, save_plot=None)</strong></p></td>
<td><p>plot the calibration dataset, the regression and the uncertainties.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>drop_point(self, index_name)</strong></p></td>
<td><p>Method to drop points, barely used.</p></td>
</tr>
<tr class="row-even"><td><p><strong>_save_calibration(self, to_file)</strong></p></td>
<td><p>save to a json file</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="micropyro.ExternalCalibration.linear_calibration">
<code class="sig-name descname">linear_calibration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">outliers</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">to_file</span><span class="o">=</span><span class="default_value">'calibration.json'</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/micropyro/external_calibration.html#ExternalCalibration.linear_calibration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#micropyro.ExternalCalibration.linear_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a linear calibration of the type y = a*x between the sample mass and the volume from GC Image.
It is a recursive function which deletes outliers at every step. The recursivity can be controlled setting the
recursive parameter to False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>recursive: bool</strong></dt><dd><p>Sets the recursivity of the function.</p>
</dd>
<dt><strong>outliers: list</strong></dt><dd><p>of outliers found after each iteration of the calibration.</p>
</dd>
<dt><strong>to_file: str</strong></dt><dd><p>Filename of the output of the calibration file.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>self.regression: statmodel object</dt><dd><p>With the results of the linear calibration</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="post-processing.html" class="btn btn-neutral float-right" title="Post processing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="compute-yields.html" class="btn btn-neutral float-left" title="Compute yields" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Francisco Torres.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>